\hypertarget{FSM_8c}{}\section{source/\+F\+SM.c File Reference}
\label{FSM_8c}\index{source/\+F\+S\+M.\+c@{source/\+F\+S\+M.\+c}}


Implementation file for the F\+SM (Finite-\/state machine) module.  


{\ttfamily \#include \char`\"{}F\+S\+M.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}elev.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}timer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}queue.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lights.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
Include dependency graph for F\+S\+M.\+c\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{FSM_8c__incl}
\end{center}
\end{figure}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries F\+S\+M\+\_\+states\+\_\+t} \{ {\bfseries F\+L\+O\+O\+R\+\_\+\+C\+L\+O\+S\+ED}, 
{\bfseries F\+L\+O\+O\+R\+\_\+\+O\+P\+EN}, 
{\bfseries M\+O\+V\+I\+NG}, 
{\bfseries S\+T\+A\+T\+I\+O\+N\+A\+RY}
 \}\hypertarget{FSM_8c_a90fb9bfd3b356116f67efce8fe4722a0}{}\label{FSM_8c_a90fb9bfd3b356116f67efce8fe4722a0}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{FSM_8c_a28434b3d630ef3dfd0dac8f77fb15700}{F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between} (\hyperlink{elev_8h_a2256dfd58fecce253106f83fd2ed607f}{elev\+\_\+motor\+\_\+direction\+\_\+t} dir, int pos)
\begin{DoxyCompactList}\small\item\em Updates the variable m\+\_\+pos\+\_\+between in order to keep track of which two floors the elevator is currently between. \end{DoxyCompactList}\item 
int \hyperlink{FSM_8c_a5e55d574485ebc87b5d5a74a1a4b35e0}{F\+S\+M\+\_\+system\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Initializes hardware and leads the elevator to a defined state and position. \end{DoxyCompactList}\item 
void \hyperlink{FSM_8c_a6e0568e2069dc494c5c9014a396b3900}{F\+S\+M\+\_\+state\+\_\+machine} ()\hypertarget{FSM_8c_a6e0568e2069dc494c5c9014a396b3900}{}\label{FSM_8c_a6e0568e2069dc494c5c9014a396b3900}

\begin{DoxyCompactList}\small\item\em Updates current state of the elevator and executes operations accordingly. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static F\+S\+M\+\_\+states\+\_\+t \hyperlink{FSM_8c_aafbb17ec8f22877b3b8ed45d657a85ab}{m\+\_\+current\+\_\+state} = F\+L\+O\+O\+R\+\_\+\+C\+L\+O\+S\+ED\hypertarget{FSM_8c_aafbb17ec8f22877b3b8ed45d657a85ab}{}\label{FSM_8c_aafbb17ec8f22877b3b8ed45d657a85ab}

\begin{DoxyCompactList}\small\item\em The current state of the system. \end{DoxyCompactList}\item 
static \hyperlink{elev_8h_a2256dfd58fecce253106f83fd2ed607f}{elev\+\_\+motor\+\_\+direction\+\_\+t} \hyperlink{FSM_8c_a0a85b6d1e7960e7dbdad8813e26dad6a}{m\+\_\+direction} = D\+I\+R\+N\+\_\+\+S\+T\+OP\hypertarget{FSM_8c_a0a85b6d1e7960e7dbdad8813e26dad6a}{}\label{FSM_8c_a0a85b6d1e7960e7dbdad8813e26dad6a}

\begin{DoxyCompactList}\small\item\em The current direction of the elevator. \end{DoxyCompactList}\item 
static int \hyperlink{FSM_8c_a49746bb03046c26e7ed748ae4704ba8d}{m\+\_\+prev\+\_\+pos} = -\/1\hypertarget{FSM_8c_a49746bb03046c26e7ed748ae4704ba8d}{}\label{FSM_8c_a49746bb03046c26e7ed748ae4704ba8d}

\begin{DoxyCompactList}\small\item\em The previos floor the elevator was located at. 0-\/3 where 0 is the bottom floor and 3 is the top floor. -\/1 is an invalid value. \end{DoxyCompactList}\item 
static int \hyperlink{FSM_8c_a730ab0afd4f7387cc3b2753b60d94498}{m\+\_\+temp\+\_\+pos} = -\/1\hypertarget{FSM_8c_a730ab0afd4f7387cc3b2753b60d94498}{}\label{FSM_8c_a730ab0afd4f7387cc3b2753b60d94498}

\begin{DoxyCompactList}\small\item\em A temporary variable used to avoid reading error from the floor sensors. 0-\/3 where 0 is the bottom floor and 3 is the top floor. -\/1 is an invalid value. \end{DoxyCompactList}\item 
static int \hyperlink{FSM_8c_aa3050385b8dc1c27488abf829fc3a9ca}{m\+\_\+pos\+\_\+between} = 0\hypertarget{FSM_8c_aa3050385b8dc1c27488abf829fc3a9ca}{}\label{FSM_8c_aa3050385b8dc1c27488abf829fc3a9ca}

\begin{DoxyCompactList}\small\item\em Variable used to keep track of wich two floors the elevator is located between as it moves. 1-\/3 where 1 is between floors 1 and 2. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Implementation file for the F\+SM (Finite-\/state machine) module. 



\subsection{Function Documentation}
\index{F\+S\+M.\+c@{F\+S\+M.\+c}!F\+S\+M\+\_\+system\+\_\+init@{F\+S\+M\+\_\+system\+\_\+init}}
\index{F\+S\+M\+\_\+system\+\_\+init@{F\+S\+M\+\_\+system\+\_\+init}!F\+S\+M.\+c@{F\+S\+M.\+c}}
\subsubsection[{\texorpdfstring{F\+S\+M\+\_\+system\+\_\+init()}{FSM_system_init()}}]{\setlength{\rightskip}{0pt plus 5cm}int F\+S\+M\+\_\+system\+\_\+init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{FSM_8c_a5e55d574485ebc87b5d5a74a1a4b35e0}{}\label{FSM_8c_a5e55d574485ebc87b5d5a74a1a4b35e0}


Initializes hardware and leads the elevator to a defined state and position. 

\begin{DoxyReturn}{Returns}
0 if the elevator hardware is unable to initialize, 1 otherwise. 
\end{DoxyReturn}


Definition at line 65 of file F\+S\+M.\+c.

\index{F\+S\+M.\+c@{F\+S\+M.\+c}!F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between@{F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between}}
\index{F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between@{F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between}!F\+S\+M.\+c@{F\+S\+M.\+c}}
\subsubsection[{\texorpdfstring{F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between(elev\+\_\+motor\+\_\+direction\+\_\+t dir, int pos)}{FSM_update_m_pos_between(elev_motor_direction_t dir, int pos)}}]{\setlength{\rightskip}{0pt plus 5cm}void F\+S\+M\+\_\+update\+\_\+m\+\_\+pos\+\_\+between (
\begin{DoxyParamCaption}
\item[{{\bf elev\+\_\+motor\+\_\+direction\+\_\+t}}]{dir, }
\item[{int}]{pos}
\end{DoxyParamCaption}
)}\hypertarget{FSM_8c_a28434b3d630ef3dfd0dac8f77fb15700}{}\label{FSM_8c_a28434b3d630ef3dfd0dac8f77fb15700}


Updates the variable m\+\_\+pos\+\_\+between in order to keep track of which two floors the elevator is currently between. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em dir} & The current direction of the elevator\\
\hline
\mbox{\tt in}  & {\em pos} & The previos floor the elevator was located at\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A number 1-\/3 representing the three possible areas between the floors 
\end{DoxyReturn}


Definition at line 184 of file F\+S\+M.\+c.

